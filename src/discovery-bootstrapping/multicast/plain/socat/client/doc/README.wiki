= socat-bootstrap-client =

Client-side of the socat-based Arrowhead service discovery bootstrapper.

It will send multicast message to a given group on a given UDP port. The server-side is expected to respond, regardless of the message, with the URI or host of the Service Registry.

== Usage: ==

<pre>docker build -t socat-bootstrap-client .
docker run \
       --rm \
       --network host \
       --name socat-bootstrap-client \
       --env OUTPUT_FILENAME=&quot;bootstrap&quot; \
       socat-bootstrap-client</pre>
== Environment variables ==

=== MCAST_GROUP ===

Multicast group to join, on which bootstrapping messages are expected.

'''Default''': <code>224.1.0.1</code>.

=== MCAST_PORT ===

Multicast group to join, on which bootstrapping messages are expected.

'''Default''': <code>6666</code>.

=== OUTPUT_FILENAME ===

Name of the file where results should be stored. If no value is given, results will not be stored, only printed. The file will be available in the /out/ directory, which can be be used by other containers through a volume.

'''No default'''.

== Using Macvlan ==

In case you prefer not to use <code>--network host</code>, you may use a macvlan network driver which should allow you to perform multicast from Docker if your engine supports it.

The network interface information should be acquired by using your operating system's tools (e.g. <code>ip address</code>)

<ul>
<li><p>Remove the network if you have done this before and want to reconfigure, otherwise skip.</p>
<pre>docker network rm mcast_net</pre></li>
<li><p>Create the network (get the information from your OS). The name of the network is <code>mcast_net</code>, you may change that to anything you prefer.</p>
<pre>docker network create -d macvlan \
        -o parent=eth0 \
        --subnet=192.168.0.0/24 \
        --gateway=192.168.0.1 \
        mcast_net</pre></li>
<li><p>Re-build the container if necessary (note that the build step is independent of the network you will use when running it).</p>
<pre>docker build -t socat-bootstrap-client .</pre></li>
<li><p>Run the container selecting the created network and an IP which falls under the correct network segment (e.g. your current IP + 10).</p>
<pre>docker run \
   --rm \
   --network mcast_net \
   --ip 192.168.0.120 \
   --name socat-bootstrap-client \
   --env OUTPUT_FILENAME=&quot;bootstrap&quot; \
   socat-bootstrap-client</pre></li></ul>

